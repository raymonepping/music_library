// backend/config/index.js (NEW file)
require('dotenv').config();

const {
  PORT = 3002,
  SESSION_SECRET = 'dev',
  FRONTEND_ORIGIN = 'http://localhost:8075',

  // Spotify
  SPOTIFY_REDIRECT_URI = 'http://localhost:3002/auth/callback',
  CLIENT_ID = '',
  CLIENT_SECRET = '',

  // Vault (optional)
  VAULT_ADDR,
  VAULT_TOKEN,
  VAULT_KV_MOUNT = 'kv',
  VAULT_SPOTIFY_PATH = 'music',

  // Sync tunables
  SYNC_PLAYLIST_PAGE_LIMIT = 25,
  SYNC_TRACK_PAGE_LIMIT = 100,
  SYNC_MAX_PLAYLISTS_PER_RUN = 200,   // 0 = no cap
  SYNC_MAX_TRACK_PAGES_PER_PLAYLIST = 10, // 0 = no cap
  SYNC_TIME_BUDGET_MS = 60000,        // 0 = unlimited
} = process.env;

module.exports = {
  PORT: Number(PORT),
  SESSION_SECRET,
  FRONTEND_ORIGIN,

  SPOTIFY_REDIRECT_URI,
  CLIENT_ID,
  CLIENT_SECRET,

  VAULT_ADDR,
  VAULT_TOKEN,
  VAULT_KV_MOUNT,
  VAULT_SPOTIFY_PATH,

  PLAYLIST_LIMIT: Number(SYNC_PLAYLIST_PAGE_LIMIT),
  TRACK_LIMIT: Number(SYNC_TRACK_PAGE_LIMIT),
  MAX_PLAYLISTS_PER_RUN: Number(SYNC_MAX_PLAYLISTS_PER_RUN),
  MAX_TRACK_PAGES_PER_PLAYLIST: Number(SYNC_MAX_TRACK_PAGES_PER_PLAYLIST),
  TIME_BUDGET_MS: Number(SYNC_TIME_BUDGET_MS),

  // Export configurations from various files
  loggerConfig: require('./logger'),
  swaggerOptions: require('./swaggerOptions'),

};
